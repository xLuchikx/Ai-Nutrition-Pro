<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- –î–ª—è Android/Chrome —á—Ç–æ–±—ã —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–ª –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#2c3e50">
    <title>AI Nutrition Pro</title>
    <link rel="stylesheet" href="style.css">

    <!-- –ò–∫–æ–Ω–∫–∞ –¥–ª—è Android –∏ –±—Ä–∞—É–∑–µ—Ä–∞ -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü•¶</text></svg>">
</head>

<body>
    <div class="header-area">
        <h1>ü•¶ –ú–æ—ë –ü–∏—Ç–∞–Ω–∏–µ ‚Äî –£–º–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å</h1>
        <div id="syncStatus" class="sync-status">‚òÅ –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ</div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞–º–∏ -->
    <div class="period-filters">
        <div class="quick-periods">
            <button class="period-btn active" onclick="setPeriod('day')">–î–µ–Ω—å</button>
            <button class="period-btn" onclick="setPeriod('week')">–ù–µ–¥–µ–ª—è</button>
            <button class="period-btn" onclick="setPeriod('month')">–ú–µ—Å—è—Ü</button>
            <button class="period-btn" onclick="setPeriod('all')">–í—Å—ë –≤—Ä–µ–º—è</button>
        </div>

        <div class="period-navigation">
            <button onclick="navigatePeriod(-1)">‚óÑ</button>
            <span id="periodLabel" style="font-weight: bold; min-width: 180px; text-align: center;">–°–µ–≥–æ–¥–Ω—è</span>
            <button onclick="navigatePeriod(1)">‚ñ∫</button>
        </div>

        <div class="action-buttons">
            <button onclick="openAiModal()" class="ai-btn">ü§ñ –ò–º–ø–æ—Ä—Ç (AI)</button>
            <button onclick="Cloud.setup()" class="export-btn" style="background: #f39c12;">‚òÅ –û–±–ª–∞–∫–æ</button>
            <button onclick="exportData()" class="export-btn">üíæ –ë—ç–∫–∞–ø</button>
        </div>
    </div>

    <!-- –ò–Ω—Ñ–æ-—Å—Ç—Ä–æ–∫–∞ -->
    <div id="statsInfo" class="info-bar">–ü–æ–∫–∞–∑–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ –∑–∞ —Å–µ–≥–æ–¥–Ω—è</div>

    <!-- –ú–∞–∫—Ä–æ—Å—ã (–ö–ë–ñ–£) -->
    <div class="summary-grid">
        <div class="summary-item cal-item">
            <div class="label">–ö–∞–ª–æ—Ä–∏–∏</div>
            <div class="value"><span id="val_cal">0</span> / <span class="goal">2500</span></div>
            <div class="progress">
                <div id="bar_cal" style="width: 0%"></div>
            </div>
        </div>
        <div class="summary-item">
            <div class="label">–ë–µ–ª–∫–∏</div>
            <div class="value"><span id="val_prot">0</span> / <span class="goal">160–≥</span></div>
            <div class="progress">
                <div id="bar_prot" class="p-fill" style="width: 0%"></div>
            </div>
        </div>
        <div class="summary-item">
            <div class="label">–ñ–∏—Ä—ã</div>
            <div class="value"><span id="val_fat">0</span> / <span class="goal">80–≥</span></div>
            <div class="progress">
                <div id="bar_fat" class="f-fill" style="width: 0%"></div>
            </div>
        </div>
        <div class="summary-item">
            <div class="label">–£–≥–ª–µ–≤–æ–¥—ã</div>
            <div class="value"><span id="val_carb">0</span> / <span class="goal">300–≥</span></div>
            <div class="progress">
                <div id="bar_carb" class="c-fill" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <!-- –ò–Ω–¥–µ–∫—Å—ã –∑–¥–æ—Ä–æ–≤—å—è (–ù–û–í–û–ï) -->
    <div class="section">
        <h2>üß¨ –ò–Ω–¥–µ–∫—Å—ã –∑–¥–æ—Ä–æ–≤—å—è</h2>
        <div class="summary-grid"
            style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); margin-bottom: 0;">
            <div class="summary-item">
                <div class="label">–ì–ª–∏–∫–µ–º. –Ω–∞–≥—Ä—É–∑–∫–∞</div>
                <div class="value" id="val_gl">0</div>
                <div class="goal">–¶–µ–ª—å: < 80</div>
                </div>
                <div class="summary-item">
                    <div class="label">Na / K (–ë–∞–ª–∞–Ω—Å)</div>
                    <div class="value" id="val_nak">0</div>
                    <div class="goal">–¶–µ–ª—å: < 0.6</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Ca / Mg (–ë–∞–ª–∞–Ω—Å)</div>
                        <div class="value" id="val_camg">0</div>
                        <div class="goal">–¶–µ–ª—å: ~ 2.0</div>
                    </div>
                </div>
            </div>

            <!-- –î–µ—Ç–∞–ª—å–Ω—ã–π —Å–æ—Å—Ç–∞–≤ (–ù–û–í–û–ï) -->
            <div class="section">
                <h2>üß™ –î–µ—Ç–∞–ª—å–Ω—ã–π —Å–æ—Å—Ç–∞–≤</h2>
                <div class="micro-grid" id="compositionGrid"></div>
            </div>

            <!-- –°–µ—Ç–∫–∞ –º–∏–∫—Ä–æ—ç–ª–µ–º–µ–Ω—Ç–æ–≤ -->
            <div class="micros-container">
                <!-- –í–∏—Ç–∞–º–∏–Ω—ã -->
                <div class="section">
                    <h2>üíä –í–∏—Ç–∞–º–∏–Ω—ã</h2>
                    <div class="micro-grid" id="vitaminsGrid"></div>
                </div>

                <!-- –ú–∏–Ω–µ—Ä–∞–ª—ã -->
                <div class="section">
                    <h2>üíé –ú–∏–Ω–µ—Ä–∞–ª—ã</h2>
                    <div class="micro-grid" id="mineralsGrid"></div>
                </div>
            </div>

            <!-- –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ -->
            <div class="section">
                <h2>üçΩ –ñ—É—Ä–Ω–∞–ª –ø—Ä–∏–µ–º–æ–≤ –ø–∏—â–∏</h2>
                <table>
                    <thead>
                        <tr>
                            <th>–î–∞—Ç–∞</th>
                            <th>–ü—Ä–æ–¥—É–∫—Ç</th>
                            <th>–ö–∫–∞–ª</th>
                            <th>–ë / –ñ / –£</th>
                            <th>–°–æ—Å—Ç–∞–≤ (—Ç–æ–ø)</th>
                            <th style="width: 40px;"></th>
                        </tr>
                    </thead>
                    <tbody id="foodList"></tbody>
                </table>
            </div>

            <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ AI -->
            <div id="aiModal" class="modal">
                <div class="modal-content">
                    <h2>–î–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ AI</h2>
                    <p class="modal-hint">–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–ø—Ç, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ —á–∞—Ç, –≤—Å—Ç–∞–≤—å—Ç–µ –æ—Ç–≤–µ—Ç JSON.</p>

                    <div style="margin-bottom: 10px; display: flex; flex-wrap: wrap; gap: 10px; align-items: center;">
                        <div>
                            <label style="font-size: 13px; font-weight: bold; color: #555;">–î–∞—Ç–∞:</label>
                            <input type="date" id="aiDateInput"
                                style="padding: 5px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div>
                            <label style="font-size: 13px; font-weight: bold; color: #555;">–ü—Ä–∏—ë–º –ø–∏—â–∏:</label>
                            <select id="mealTypeInput"
                                style="padding: 5px; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="–ó–∞–≤—Ç—Ä–∞–∫">–ó–∞–≤—Ç—Ä–∞–∫</option>
                                <option value="–û–±–µ–¥">–û–±–µ–¥</option>
                                <option value="–ü–æ–ª–¥–Ω–∏–∫">–ü–æ–ª–¥–Ω–∏–∫</option>
                                <option value="–£–∂–∏–Ω">–£–∂–∏–Ω</option>
                                <option value="–ü–µ—Ä–µ–∫—É—Å">–ü–µ—Ä–µ–∫—É—Å</option>
                            </select>
                        </div>
                    </div>

                    <button onclick="copyPrompt()" class="copy-btn">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ü—Ä–æ–º–ø—Ç</button>
                    <textarea id="aiInput" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ JSON –º–∞—Å—Å–∏–≤ —Å—é–¥–∞..."></textarea>
                    <div class="modal-footer">
                        <button onclick="closeModal()" class="cancel-btn">–û—Ç–º–µ–Ω–∞</button>
                        <button onclick="processAiData()" class="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                </div>
            </div>

            <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π –ø—Ä–æ–¥—É–∫—Ç–∞ -->
            <div id="productModal" class="modal">
                <div class="modal-content pm-original-design" style="max-height: 90vh; overflow-y: auto;">
                    <div class="pm-header-main"
                        style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
                        <h2 id="pmName" style="border:none; margin:0; padding:0;">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞</h2>
                        <span class="pm-close" onclick="closeProductModal()"
                            style="font-size: 24px; cursor: pointer; color: #e74c3c;">‚úï</span>
                    </div>

                    <!-- –°–µ—Ç–∫–∞ –º–∞–∫—Ä–æ—Å–æ–≤ 2x2 -->
                    <div class="pm-macros-grid"
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                        <div class="pm-macro-item">
                            <div class="label" style="font-size: 10px;">–ö–ö–ê–õ</div>
                            <div class="value" id="pmCal" style="font-size: 18px; margin:0;">0</div>
                        </div>
                        <div class="pm-macro-item">
                            <div class="label" style="font-size: 10px;">–ë–ï–õ–ö–ò</div>
                            <div class="value" id="pmProt" style="font-size: 18px; margin:0;">0–≥</div>
                        </div>
                        <div class="pm-macro-item">
                            <div class="label" style="font-size: 10px;">–ñ–ò–†–´</div>
                            <div class="value" id="pmFat" style="font-size: 18px; margin:0;">0–≥</div>
                        </div>
                        <div class="pm-macro-item">
                            <div class="label" style="font-size: 10px;">–£–ì–õ–ï–í–û–î–´</div>
                            <div class="value" id="pmCarb" style="font-size: 18px; margin:0;">14–≥</div>
                        </div>
                    </div>

                    <div class="pm-section-title"
                        style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                        <span style="font-size: 18px;">üß™</span>
                        <h2 style="border:none; margin:0; padding:0; font-size: 14px; color: #2c3e50;">–ü–û–õ–ù–´–ô –°–û–°–¢–ê–í
                        </h2>
                    </div>

                    <div id="pmComposition" class="pm-comp-list"
                        style="display: flex; flex-direction: column; gap: 10px;">
                        <!-- –°—é–¥–∞ –±—É–¥—É—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –∫–∞—Ä—Ç–æ—á–∫–∏ -->
                    </div>

                    <div class="modal-footer" style="margin-top: 20px; justify-content: center;">
                        <button onclick="closeProductModal()" class="copy-btn"
                            style="background: #7f8c8d; max-width: 200px;">–ó–∞–∫—Ä—ã—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –ª–æ–≥–∏–∫—É –æ–±–ª–∞–∫–∞ -->
    <script src="cloud.js"></script>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script src="script.js"></script>
</body>

</html>